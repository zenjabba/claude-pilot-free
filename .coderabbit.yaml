# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json
# CodeRabbit configuration - https://docs.coderabbit.ai/guides/configure-coderabbit

language: "en-US"
early_access: false

reviews:
  profile: "chill"
  request_changes_workflow: false
  high_level_summary: true
  poem: false
  review_status: true
  collapse_walkthrough: false

  auto_review:
    enabled: true
    drafts: false
    ignore_title_keywords:
      - "WIP"
      - "DO NOT MERGE"
      - "DRAFT"

  path_filters:
    # Exclude git-crypted directory from reviews
    - "!pilot/**"

  path_instructions:
    # Test files - brief review focused on coverage
    - path: "**/tests/**"
      instructions: |
        Review test code briefly. Focus on:
        - Test coverage for the feature being tested
        - Proper mocking of external dependencies
        - Clear test names that describe behavior
        Skip detailed style comments.
    - path: "**/*_test.py"
      instructions: |
        Review test code briefly. Focus on coverage and proper mocking.
    - path: "**/test_*.py"
      instructions: |
        Review test code briefly. Focus on coverage and proper mocking.

    # Installer code - focus on idempotency and error handling
    - path: "installer/**/*.py"
      instructions: |
        Review installer code for:
        - Idempotency (can be run multiple times safely)
        - Proper error handling and user feedback
        - Cross-platform compatibility

    # Shell scripts - focus on portability
    - path: "*.sh"
      instructions: |
        Review shell scripts for POSIX compatibility and proper error handling.

    # GitHub workflows
    - path: ".github/workflows/**"
      instructions: |
        Review workflows for security best practices and proper permissions.

chat:
  auto_reply: true
